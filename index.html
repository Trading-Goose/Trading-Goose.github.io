<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TradingGoose - Multi-Agent Trading System</title>
  <meta name="description"
    content="AI-powered trading system with 11 specialized agents for comprehensive market analysis" />
  <meta name="author" content="TradingGoose" />

  <meta property="og:title" content="TradingGoose" />
  <meta property="og:description"
    content="AI-powered LLM portfolio management with 15 specialized agents for comprehensive market analysis" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/Social-Preview.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@tradinggoose" />
  <meta name="twitter:image" content="/Social-Preview.png" />

  <!-- GitHub Pages SPA redirect handling -->
  <script type="text/javascript">
    // Single Page Apps for GitHub Pages
    // This script checks if a redirect is present and handles it
    (function (l) {
      if (l.search[1] === '/') {
        var decoded = l.search.slice(1).split('&').map(function (s) {
          return s.replace(/~and~/g, '&')
        }).join('?');
        window.history.replaceState(null, null,
          l.pathname.slice(0, -1) + decoded + l.hash
        );
      }
    }(window.location))
  </script>

  <!-- GitHub OAuth redirect handler -->
  <script type="text/javascript">
      // Handle GitHub OAuth redirect for TradingGoose.github.io
      (function () {
        // No path adjustment needed since we're hosting at root domain
        // OAuth redirects should work correctly without path manipulation
      })();
  </script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9651663494022087"
    crossorigin="anonymous"></script>

  <!-- Google tag (gtag.js) Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HYXMNMH4WX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    // Initial config without user_id
    gtag('config', 'G-HYXMNMH4WX', {
      send_page_view: false, // Prevent automatic pageview
      custom_map: {
        'dimension1': 'login_status',
        'dimension2': 'user_type'
      }
    });

    // Function to track authenticated users
    window.trackAuthenticatedUser = function (userId, userType) {
      if (userId) {
        gtag('config', 'G-HYXMNMH4WX', {
          user_id: userId,
          user_properties: {
            user_type: userType || 'standard'
          }
        });

        // Send custom pageview for authenticated users
        gtag('event', 'page_view', {
          login_status: 'logged_in',
          user_type: userType || 'standard'
        });
      }
    };

    // Function to track anonymous pageviews
    window.trackAnonymousPageview = function () {
      gtag('event', 'page_view', {
        login_status: 'anonymous'
      });
    };
  </script>


</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>

  <!-- Widgetbot Crate for Discord -->
  <script src="https://cdn.jsdelivr.net/npm/@widgetbot/crate@3" async defer></script>
  <script>
    // Wait for page to fully load before initializing Widgetbot
    window.addEventListener('load', function () {
      // 3 second delay after page load with fade-in animation
      setTimeout(function () {
        new Crate({
          server: '1410785898273964166', // Replace with your Discord server ID
          channel: '1411021392983363616', // Replace with your Discord channel ID
          location: ['bottom', 'right'], // Position at bottom right
          color: '#ffcc00', // Discord's default color, you can change this
          notifications: true, // Show notification badge
          indicator: true, // Show unread message indicator
          defer: true,
          css: `
            @keyframes fadeInScale {
              0% {
                opacity: 0;
                transform: scale(0.8);
              }
              100% {
                opacity: 1;
                transform: scale(1);
              }
            }
            
            &[open="false"] {
              animation: fadeInScale 0.5s ease-out forwards;
            }
          `
        });
      }, 2000); // 2 seconds delay after page load
    });
  </script>
</body>

</html>